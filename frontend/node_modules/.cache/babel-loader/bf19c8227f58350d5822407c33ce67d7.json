{"ast":null,"code":"import _regeneratorRuntime from\"/Users/jielianglin/Desktop/m-v2-frontend/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/jielianglin/Desktop/m-v2-frontend/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/jielianglin/Desktop/m-v2-frontend/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectSpread from\"/Users/jielianglin/Desktop/m-v2-frontend/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _objectWithoutProperties from\"/Users/jielianglin/Desktop/m-v2-frontend/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";var _excluded=[\"children\",\"classes\",\"onClose\"];import React from\"react\";import axios from\"axios\";import UploadIMG from'./uploadIMG/UploadIMG.png';import Caption from\"../annotation/Caption\";import Tags from\"../annotation/Tags\";import FileInputSimple from\"./FileInputSimple\";import{Typography,Chip,Avatar}from\"@material-ui/core\";import Button from\"@material-ui/core/Button\";import Dialog from\"@material-ui/core/Dialog\";import MuiDialogTitle from\"@material-ui/core/DialogTitle\";import MuiDialogContent from\"@material-ui/core/DialogContent\";import IconButton from\"@material-ui/core/IconButton\";import CloseIcon from\"@material-ui/icons/Close\";import Popover from\"@material-ui/core/Popover\";import{ThemeProvider}from\"@material-ui/styles\";import CircularProgress from\"@material-ui/core/CircularProgress\";import{createTheme}from\"@material-ui/core/styles\";import{makeStyles}from'@material-ui/core/styles';import{withStyles}from\"@material-ui/core/styles\";import MatchBar from\"../../explore/Matchbar\";//popover styling\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{popover:{pointerEvents:'none'},paper:{padding:theme.spacing(1),backgroundColor:'transparent'}};});// dialog styling\nvar styles=function styles(theme){return{root:{margin:0,padding:theme.spacing(2),color:\"#FFFFFF\",backgroundColor:\"#E6DAC8\"},closeButton:{position:\"absolute\",right:theme.spacing(1),top:theme.spacing(1),color:theme.palette.grey[500]}};};// return form styling\nvar theme=createTheme({palette:{primary:{main:\"#000000\"}// secondary: {\n//     main: \"#668389\",\n// },\n}});var DialogTitle=withStyles(styles)(function(props){var children=props.children,classes=props.classes,onClose=props.onClose,other=_objectWithoutProperties(props,_excluded);return/*#__PURE__*/_jsxs(MuiDialogTitle,_objectSpread(_objectSpread({disableTypography:true,className:classes.root},other),{},{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:children}),onClose?/*#__PURE__*/_jsx(IconButton,{\"aria-label\":\"close\",className:classes.closeButton,onClick:onClose,children:/*#__PURE__*/_jsx(CloseIcon,{})}):null]}));});var DialogContent=withStyles(function(theme){return{root:{padding:theme.spacing(2),backgroundColor:\"#FFFFFF\"}};})(MuiDialogContent);export default function CustomizedDialogs(props){var classes=useStyles();var _React$useState=React.useState(null),_React$useState2=_slicedToArray(_React$useState,2),anchorEl=_React$useState2[0],setAnchorEl=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),open=_React$useState4[0],setOpen=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),forms=_React$useState6[0],setForms=_React$useState6[1];var _React$useState7=React.useState(false),_React$useState8=_slicedToArray(_React$useState7,2),post=_React$useState8[0],setPost=_React$useState8[1];var _React$useState9=React.useState(null),_React$useState10=_slicedToArray(_React$useState9,2),image=_React$useState10[0],setImage=_React$useState10[1];var _React$useState11=React.useState([]),_React$useState12=_slicedToArray(_React$useState11,2),tags=_React$useState12[0],setTags=_React$useState12[1];var _React$useState13=React.useState(null),_React$useState14=_slicedToArray(_React$useState13,2),src=_React$useState14[0],setSrc=_React$useState14[1];var _React$useState15=React.useState(null),_React$useState16=_slicedToArray(_React$useState15,2),returnTags=_React$useState16[0],setReturnTags=_React$useState16[1];var _React$useState17=React.useState(null),_React$useState18=_slicedToArray(_React$useState17,2),caption=_React$useState18[0],setCaption=_React$useState18[1];var _React$useState19=React.useState([]),_React$useState20=_slicedToArray(_React$useState19,2),returnCaption=_React$useState20[0],setReturnCaption=_React$useState20[1];var _React$useState21=React.useState([]),_React$useState22=_slicedToArray(_React$useState21,2),returnAITags=_React$useState22[0],setReturnAITags=_React$useState22[1];var _React$useState23=React.useState(false),_React$useState24=_slicedToArray(_React$useState23,2),progress=_React$useState24[0],setProgress=_React$useState24[1];var handleClickOpen=function handleClickOpen(){setOpen(true);};var handleClose=function handleClose(){setOpen(false);};var showPopover=function showPopover(event){setAnchorEl(event.currentTarget);};var closePopover=function closePopover(){setAnchorEl(null);};var openPopover=Boolean(anchorEl);var showInputForms=function showInputForms(){setForms(true);};var enteredCaption=function enteredCaption(caption){setCaption(caption);};var selectedTags=function selectedTags(tags){setTags(tags);};var selectedImage=function selectedImage(img){setImage(img);};function postData(){return _postData.apply(this,arguments);}function _postData(){_postData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var formData,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setProgress(true);console.log(tags);console.log(tags.join(\",\"));formData=new FormData();formData.append(\"files\",image);formData.append(\"tags\",tags.join(\",\"));formData.append(\"caption\",caption);_context.next=9;return axios.post(\"http://localhost:8000/images\",formData);case 9:response=_context.sent;// props.newTitle();\nsetSrc(\"http://localhost:8000/images/\".concat(response.data.id,\".jpeg\"));console.log(response.data.caption);setReturnCaption(response.data.caption);console.log(response.data.tags);setReturnTags(response.data.tags);console.log(response.data.ai_tags);setReturnAITags(response.data.ai_tags||[]);setPost(true);setProgress(false);case 19:case\"end\":return _context.stop();}}},_callee);}));return _postData.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(IconButton,{className:\"upload-button\",onClick:handleClickOpen// onMouseEnter={showPopover}\n// onMouseLeave={closePopover}\n,size:\"small\",children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{src:UploadIMG,alt:\"upload\",width:\"90px\"})})}),/*#__PURE__*/_jsx(Popover,{id:\"mouse-over-popover\",className:classes.popover,classes:{paper:classes.paper},elevation:0,open:openPopover,anchorEl:anchorEl,anchorOrigin:{vertical:'top',horizontal:'center'},transformOrigin:{vertical:'bottom',horizontal:'center'},onClose:closePopover,disableRestoreFocus:true,children:/*#__PURE__*/_jsx(Typography,{variant:\"h6\",style:{color:\"#B272CE\"},children:\"Upload\"})}),/*#__PURE__*/_jsxs(Dialog,{onClose:handleClose,\"aria-labelledby\":\"customized-dialog-title\",open:open,maxWidth:\"md\",fullWidth:true,children:[/*#__PURE__*/_jsx(DialogTitle//newTitle={newTitle}\n,{id:\"customized-dialog-title\",onClose:handleClose,children:\"Upload Image\"}),/*#__PURE__*/_jsx(DialogContent,{dividers:true,children:post?/*#__PURE__*/_jsxs(\"div\",{className:\"returnForm\",children:[/*#__PURE__*/_jsx(\"img\",{style:{display:\"block\",margin:\"0 auto\",height:\"50%\",borderRadius:\"5px\"},className:\"returned-image\",src:src,alt:\"\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(ThemeProvider,{theme:theme,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",color:\"primary\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"returned-caption\",children:[/*#__PURE__*/_jsx(\"i\",{children:\"\\\"\"}),/*#__PURE__*/_jsxs(\"i\",{children:[\" \",/*#__PURE__*/_jsx(\"span\",{children:returnCaption}),\" \"]}),/*#__PURE__*/_jsx(\"i\",{children:\"\\\"\"})]})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"span\",{className:\"tags-return\",children:[/*#__PURE__*/_jsx(Typography,{color:\"primary\",children:\" Your Tags: \"}),returnTags.map(function(item){return/*#__PURE__*/_jsx(Chip,{color:\"primary\",className:\"returned-tags-chip\",style:{color:\"#B272CE\",backgroundColor:\"#FFFFFF\"},avatar:/*#__PURE__*/_jsx(Avatar,{style:{color:\"#B272CE\"},children:/*#__PURE__*/_jsx(\"div\",{style:{color:\"#FFFFFF\"},children:\"#\"})}),label:item.tag,variant:\"outlined\"},item.id);})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"span\",{className:\"ai_tags_return\",children:[/*#__PURE__*/_jsx(Typography,{color:\"secondary\",children:\" Tags from ImageNet AI: \"}),returnAITags.length===0&&/*#__PURE__*/_jsx(Typography,{variant:\"h12\",color:\"#OOOOOO\",children:/*#__PURE__*/_jsx(\"i\",{children:\"[couldn't identify any tags] \"})}),/*#__PURE__*/_jsx(\"div\",{children:returnAITags.map(function(item){return/*#__PURE__*/_jsx(Chip,{className:\"returned-ai-tags-chip\",style:{color:\"#000000\",backgroundColor:\"#FFFFFF\"},avatar:/*#__PURE__*/_jsx(Avatar,{style:{background:\"#B5BCB4\"},children:/*#__PURE__*/_jsx(\"div\",{style:{color:\"#FFFFFF\"},children:\"#\"})}),label:item.tag},item.id);})}),/*#__PURE__*/_jsx(\"div\",{children:returnAITags.map(function(aiitem){return/*#__PURE__*/_jsx(MatchBar,{match:parseFloat(aiitem.confidence),aitag:aiitem.tag});})})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"postForm\",style:{padding:\"50px\"},children:[forms&&/*#__PURE__*/_jsx(Caption,{enteredCaption:enteredCaption}),/*#__PURE__*/_jsx(FileInputSimple,{showInputForms:showInputForms,FileInput:true,selectedImage:selectedImage}),forms&&/*#__PURE__*/_jsx(Tags,{selectedTags:selectedTags}),/*#__PURE__*/_jsxs(\"div\",{className:\"save-data\",children:[/*#__PURE__*/_jsxs(Button,{disabled:!image||!caption||tags.length===0,className:\"save-button\",palette:\"primary\",onClick:postData,children:[\" \",\"Save\",\" \"]}),/*#__PURE__*/_jsx(ThemeProvider,{theme:theme,children:progress&&/*#__PURE__*/_jsx(CircularProgress,{})})]})]})})]})]});}","map":{"version":3,"sources":["/Users/jielianglin/Desktop/m-v2-frontend/frontend/src/components/upload/uploadButton/UploadButtonSmall.js"],"names":["React","axios","UploadIMG","Caption","Tags","FileInputSimple","Typography","Chip","Avatar","Button","Dialog","MuiDialogTitle","MuiDialogContent","IconButton","CloseIcon","Popover","ThemeProvider","CircularProgress","createTheme","makeStyles","withStyles","MatchBar","useStyles","theme","popover","pointerEvents","paper","padding","spacing","backgroundColor","styles","root","margin","color","closeButton","position","right","top","palette","grey","primary","main","DialogTitle","props","children","classes","onClose","other","DialogContent","CustomizedDialogs","useState","anchorEl","setAnchorEl","open","setOpen","forms","setForms","post","setPost","image","setImage","tags","setTags","src","setSrc","returnTags","setReturnTags","caption","setCaption","returnCaption","setReturnCaption","returnAITags","setReturnAITags","progress","setProgress","handleClickOpen","handleClose","showPopover","event","currentTarget","closePopover","openPopover","Boolean","showInputForms","enteredCaption","selectedTags","selectedImage","img","postData","console","log","join","formData","FormData","append","response","data","id","ai_tags","vertical","horizontal","display","height","borderRadius","map","item","tag","length","background","aiitem","parseFloat","confidence"],"mappings":"u4BAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CAEA,MAAOC,CAAAA,SAAP,KAAsB,2BAAtB,CACA,MAAOC,CAAAA,OAAP,KAAoB,uBAApB,CACA,MAAOC,CAAAA,IAAP,KAAiB,oBAAjB,CACA,MAAOC,CAAAA,eAAP,KAA4B,mBAA5B,CAEA,OAASC,UAAT,CAAqBC,IAArB,CAA2BC,MAA3B,KAAyC,mBAAzC,CACA,MAAOC,CAAAA,MAAP,KAAmB,0BAAnB,CACA,MAAOC,CAAAA,MAAP,KAAmB,0BAAnB,CACA,MAAOC,CAAAA,cAAP,KAA2B,+BAA3B,CACA,MAAOC,CAAAA,gBAAP,KAA6B,iCAA7B,CACA,MAAOC,CAAAA,UAAP,KAAuB,8BAAvB,CACA,MAAOC,CAAAA,SAAP,KAAsB,0BAAtB,CACA,MAAOC,CAAAA,OAAP,KAAoB,2BAApB,CACA,OAASC,aAAT,KAA8B,qBAA9B,CACA,MAAOC,CAAAA,gBAAP,KAA6B,oCAA7B,CAEA,OAASC,WAAT,KAA4B,0BAA5B,CACA,OAASC,UAAT,KAA2B,0BAA3B,CACA,OAASC,UAAT,KAA2B,0BAA3B,CAEA,MAAOC,CAAAA,QAAP,KAAqB,wBAArB,CAEA;wFACA,GAAMC,CAAAA,SAAS,CAAGH,UAAU,CAAC,SAACI,KAAD,QAAY,CACrCC,OAAO,CAAE,CACLC,aAAa,CAAE,MADV,CAD4B,CAIrCC,KAAK,CAAE,CACHC,OAAO,CAAEJ,KAAK,CAACK,OAAN,CAAc,CAAd,CADN,CAEHC,eAAe,CAAE,aAFd,CAJ8B,CAAZ,EAAD,CAA5B,CAWA;AACA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,CAACP,KAAD,QAAY,CACvBQ,IAAI,CAAE,CACFC,MAAM,CAAE,CADN,CAEFL,OAAO,CAAEJ,KAAK,CAACK,OAAN,CAAc,CAAd,CAFP,CAGFK,KAAK,CAAE,SAHL,CAIFJ,eAAe,CAAE,SAJf,CADiB,CAOvBK,WAAW,CAAE,CACTC,QAAQ,CAAE,UADD,CAETC,KAAK,CAAEb,KAAK,CAACK,OAAN,CAAc,CAAd,CAFE,CAGTS,GAAG,CAAEd,KAAK,CAACK,OAAN,CAAc,CAAd,CAHI,CAITK,KAAK,CAAEV,KAAK,CAACe,OAAN,CAAcC,IAAd,CAAmB,GAAnB,CAJE,CAPU,CAAZ,EAAf,CAeA;AACA,GAAMhB,CAAAA,KAAK,CAAGL,WAAW,CAAC,CACtBoB,OAAO,CAAE,CACLE,OAAO,CAAE,CACLC,IAAI,CAAE,SADD,CAGT;AACA;AACA;AANK,CADa,CAAD,CAAzB,CAWA,GAAMC,CAAAA,WAAW,CAAGtB,UAAU,CAACU,MAAD,CAAV,CAAmB,SAACa,KAAD,CAAW,CAC9C,GAAQC,CAAAA,QAAR,CAAiDD,KAAjD,CAAQC,QAAR,CAAkBC,OAAlB,CAAiDF,KAAjD,CAAkBE,OAAlB,CAA2BC,OAA3B,CAAiDH,KAAjD,CAA2BG,OAA3B,CAAuCC,KAAvC,0BAAiDJ,KAAjD,YACA,mBACI,MAAC,cAAD,8BAAgB,iBAAiB,KAAjC,CAAkC,SAAS,CAAEE,OAAO,CAACd,IAArD,EAA+DgB,KAA/D,6BACI,KAAC,UAAD,EAAY,OAAO,CAAC,IAApB,UAA0BH,QAA1B,EADJ,CAEKE,OAAO,cACJ,KAAC,UAAD,EACI,aAAW,OADf,CAEI,SAAS,CAAED,OAAO,CAACX,WAFvB,CAGI,OAAO,CAAEY,OAHb,uBAKI,KAAC,SAAD,IALJ,EADI,CAQJ,IAVR,IADJ,CAcH,CAhBmB,CAApB,CAkBA,GAAME,CAAAA,aAAa,CAAG5B,UAAU,CAAC,SAACG,KAAD,QAAY,CACzCQ,IAAI,CAAE,CACFJ,OAAO,CAAEJ,KAAK,CAACK,OAAN,CAAc,CAAd,CADP,CAEFC,eAAe,CAAE,SAFf,CADmC,CAAZ,EAAD,CAAV,CAKlBjB,gBALkB,CAAtB,CAQA,cAAe,SAASqC,CAAAA,iBAAT,CAA2BN,KAA3B,CAAkC,CAC7C,GAAME,CAAAA,OAAO,CAAGvB,SAAS,EAAzB,CACA,oBAAgCtB,KAAK,CAACkD,QAAN,CAAe,IAAf,CAAhC,oDAAOC,QAAP,qBAAiBC,WAAjB,qBACA,qBAAwBpD,KAAK,CAACkD,QAAN,CAAe,KAAf,CAAxB,qDAAOG,IAAP,qBAAaC,OAAb,qBACA,qBAA0BtD,KAAK,CAACkD,QAAN,CAAe,KAAf,CAA1B,qDAAOK,KAAP,qBAAcC,QAAd,qBAEA,qBAAwBxD,KAAK,CAACkD,QAAN,CAAe,KAAf,CAAxB,qDAAOO,IAAP,qBAAaC,OAAb,qBACA,qBAA0B1D,KAAK,CAACkD,QAAN,CAAe,IAAf,CAA1B,sDAAOS,KAAP,sBAAcC,QAAd,sBACA,sBAAwB5D,KAAK,CAACkD,QAAN,CAAe,EAAf,CAAxB,uDAAOW,IAAP,sBAAaC,OAAb,sBACA,sBAAsB9D,KAAK,CAACkD,QAAN,CAAe,IAAf,CAAtB,uDAAOa,GAAP,sBAAYC,MAAZ,sBACA,sBAAoChE,KAAK,CAACkD,QAAN,CAAe,IAAf,CAApC,uDAAOe,UAAP,sBAAmBC,aAAnB,sBACA,sBAA8BlE,KAAK,CAACkD,QAAN,CAAe,IAAf,CAA9B,uDAAOiB,OAAP,sBAAgBC,UAAhB,sBACA,sBAA0CpE,KAAK,CAACkD,QAAN,CAAe,EAAf,CAA1C,uDAAOmB,aAAP,sBAAsBC,gBAAtB,sBACA,sBAAwCtE,KAAK,CAACkD,QAAN,CAAe,EAAf,CAAxC,uDAAOqB,YAAP,sBAAqBC,eAArB,sBACA,sBAAgCxE,KAAK,CAACkD,QAAN,CAAe,KAAf,CAAhC,uDAAOuB,QAAP,sBAAiBC,WAAjB,sBAEA,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,EAAM,CAC1BrB,OAAO,CAAC,IAAD,CAAP,CACH,CAFD,CAGA,GAAMsB,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CACtBtB,OAAO,CAAC,KAAD,CAAP,CACH,CAFD,CAIA,GAAMuB,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,KAAD,CAAW,CAC3B1B,WAAW,CAAC0B,KAAK,CAACC,aAAP,CAAX,CACH,CAFD,CAIA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CACvB5B,WAAW,CAAC,IAAD,CAAX,CACH,CAFD,CAIA,GAAM6B,CAAAA,WAAW,CAAGC,OAAO,CAAC/B,QAAD,CAA3B,CAEA,GAAMgC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,EAAM,CACzB3B,QAAQ,CAAC,IAAD,CAAR,CACH,CAFD,CAIA,GAAM4B,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACjB,OAAD,CAAa,CAChCC,UAAU,CAACD,OAAD,CAAV,CACH,CAFD,CAGA,GAAMkB,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACxB,IAAD,CAAU,CAC3BC,OAAO,CAACD,IAAD,CAAP,CACH,CAFD,CAIA,GAAMyB,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,GAAD,CAAS,CAC3B3B,QAAQ,CAAC2B,GAAD,CAAR,CACH,CAFD,CA5C6C,QAgD9BC,CAAAA,QAhD8B,kIAgD7C,yJACId,WAAW,CAAC,IAAD,CAAX,CACAe,OAAO,CAACC,GAAR,CAAY7B,IAAZ,EACA4B,OAAO,CAACC,GAAR,CAAY7B,IAAI,CAAC8B,IAAL,CAAU,GAAV,CAAZ,EACIC,QAJR,CAImB,GAAIC,CAAAA,QAAJ,EAJnB,CAKID,QAAQ,CAACE,MAAT,CAAgB,OAAhB,CAAyBnC,KAAzB,EACAiC,QAAQ,CAACE,MAAT,CAAgB,MAAhB,CAAwBjC,IAAI,CAAC8B,IAAL,CAAU,GAAV,CAAxB,EACAC,QAAQ,CAACE,MAAT,CAAgB,SAAhB,CAA2B3B,OAA3B,EAPJ,sBAQyBlE,CAAAA,KAAK,CAACwD,IAAN,CAAW,8BAAX,CAA2CmC,QAA3C,CARzB,QAQQG,QARR,eASI;AACA/B,MAAM,wCAAiC+B,QAAQ,CAACC,IAAT,CAAcC,EAA/C,UAAN,CACAR,OAAO,CAACC,GAAR,CAAYK,QAAQ,CAACC,IAAT,CAAc7B,OAA1B,EACAG,gBAAgB,CAACyB,QAAQ,CAACC,IAAT,CAAc7B,OAAf,CAAhB,CACAsB,OAAO,CAACC,GAAR,CAAYK,QAAQ,CAACC,IAAT,CAAcnC,IAA1B,EACAK,aAAa,CAAC6B,QAAQ,CAACC,IAAT,CAAcnC,IAAf,CAAb,CACA4B,OAAO,CAACC,GAAR,CAAYK,QAAQ,CAACC,IAAT,CAAcE,OAA1B,EACA1B,eAAe,CAACuB,QAAQ,CAACC,IAAT,CAAcE,OAAd,EAAyB,EAA1B,CAAf,CACAxC,OAAO,CAAC,IAAD,CAAP,CACAgB,WAAW,CAAC,KAAD,CAAX,CAlBJ,uDAhD6C,2CAqE7C,mBACI,oCACI,KAAC,UAAD,EACI,SAAS,CAAC,eADd,CAEI,OAAO,CAAEC,eACT;AACA;AAJJ,CAKI,IAAI,CAAC,OALT,uBAOI,kCACI,YAAK,GAAG,CAAEzE,SAAV,CAAqB,GAAG,CAAC,QAAzB,CAAkC,KAAK,CAAC,MAAxC,EADJ,EAPJ,EADJ,cAYI,KAAC,OAAD,EACI,EAAE,CAAC,oBADP,CAEI,SAAS,CAAE2C,OAAO,CAACrB,OAFvB,CAGI,OAAO,CAAE,CACLE,KAAK,CAAEmB,OAAO,CAACnB,KADV,CAHb,CAMI,SAAS,CAAE,CANf,CAOI,IAAI,CAAEuD,WAPV,CAQI,QAAQ,CAAE9B,QARd,CASI,YAAY,CAAE,CACVgD,QAAQ,CAAE,KADA,CAEVC,UAAU,CAAE,QAFF,CATlB,CAaI,eAAe,CAAE,CACbD,QAAQ,CAAE,QADG,CAEbC,UAAU,CAAE,QAFC,CAbrB,CAiBI,OAAO,CAAEpB,YAjBb,CAkBI,mBAAmB,KAlBvB,uBAoBI,KAAC,UAAD,EAAY,OAAO,CAAC,IAApB,CAAyB,KAAK,CAAE,CAAE/C,KAAK,CAAE,SAAT,CAAhC,oBApBJ,EAZJ,cAoCI,MAAC,MAAD,EACI,OAAO,CAAE2C,WADb,CAEI,kBAAgB,yBAFpB,CAGI,IAAI,CAAEvB,IAHV,CAII,QAAQ,CAAC,IAJb,CAKI,SAAS,CAAE,IALf,wBAOI,KAAC,WACG;AADJ,EAEI,EAAE,CAAC,yBAFP,CAGI,OAAO,CAAEuB,WAHb,0BAPJ,cAcI,KAAC,aAAD,EAAe,QAAQ,KAAvB,UACKnB,IAAI,cAED,aAAK,SAAS,CAAC,YAAf,wBACI,YACI,KAAK,CAAE,CACH4C,OAAO,CAAE,OADN,CAEHrE,MAAM,CAAE,QAFL,CAGHsE,MAAM,CAAE,KAHL,CAIHC,YAAY,CAAE,KAJX,CADX,CAOI,SAAS,CAAC,gBAPd,CAQI,GAAG,CAAExC,GART,CASI,GAAG,CAAC,EATR,EADJ,cAYI,aAZJ,cAaI,MAAC,aAAD,EAAe,KAAK,CAAExC,KAAtB,wBACI,KAAC,UAAD,EAAY,OAAO,CAAC,IAApB,CAAyB,KAAK,CAAC,SAA/B,uBACI,aAAK,SAAS,CAAC,kBAAf,wBACI,yBADJ,cAEI,qBACK,GADL,cAEI,sBAAO8C,aAAP,EAFJ,CAEiC,GAFjC,GAFJ,cAMI,yBANJ,GADJ,EADJ,cAWI,aAXJ,cAYI,cAAM,SAAS,CAAC,aAAhB,wBACI,KAAC,UAAD,EAAY,KAAK,CAAC,SAAlB,0BADJ,CAEKJ,UAAU,CAACuC,GAAX,CAAe,SAACC,IAAD,qBACZ,KAAC,IAAD,EACI,KAAK,CAAC,SADV,CAEI,SAAS,CAAC,oBAFd,CAGI,KAAK,CAAE,CAAExE,KAAK,CAAE,SAAT,CAAoBJ,eAAe,CAAE,SAArC,CAHX,CAII,MAAM,cACF,KAAC,MAAD,EAAQ,KAAK,CAAE,CAAEI,KAAK,CAAE,SAAT,CAAf,uBACI,YAAK,KAAK,CAAE,CAAEA,KAAK,CAAE,SAAT,CAAZ,eADJ,EALR,CAYI,KAAK,CAAEwE,IAAI,CAACC,GAZhB,CAaI,OAAO,CAAC,UAbZ,EAWSD,IAAI,CAACR,EAXd,CADY,EAAf,CAFL,GAZJ,cAgCI,aAhCJ,cAiCI,aAjCJ,cAkCI,cAAM,SAAS,CAAC,gBAAhB,wBACI,KAAC,UAAD,EAAY,KAAK,CAAC,WAAlB,sCADJ,CAEK1B,YAAY,CAACoC,MAAb,GAAwB,CAAxB,eACG,KAAC,UAAD,EAAY,OAAO,CAAC,KAApB,CAA0B,KAAK,CAAC,SAAhC,uBACI,oDADJ,EAHR,cAOI,qBACKpC,YAAY,CAACiC,GAAb,CAAiB,SAACC,IAAD,qBACd,KAAC,IAAD,EACI,SAAS,CAAC,uBADd,CAEI,KAAK,CAAE,CAAExE,KAAK,CAAE,SAAT,CAAoBJ,eAAe,CAAE,SAArC,CAFX,CAGI,MAAM,cACF,KAAC,MAAD,EAAQ,KAAK,CAAE,CAAE+E,UAAU,CAAE,SAAd,CAAf,uBACI,YAAK,KAAK,CAAE,CAAE3E,KAAK,CAAE,SAAT,CAAZ,eADJ,EAJR,CAWI,KAAK,CAAEwE,IAAI,CAACC,GAXhB,EAUSD,IAAI,CAACR,EAVd,CADc,EAAjB,CADL,EAPJ,cAwBI,qBACK1B,YAAY,CAACiC,GAAb,CAAiB,SAACK,MAAD,CAAY,CAC1B,mBACI,KAAC,QAAD,EACI,KAAK,CAAEC,UAAU,CAACD,MAAM,CAACE,UAAR,CADrB,CAEI,KAAK,CAAEF,MAAM,CAACH,GAFlB,EADJ,CAMH,CAPA,CADL,EAxBJ,GAlCJ,cAsEI,aAtEJ,cAuEI,aAvEJ,GAbJ,GAFC,cA4FD,aAAK,SAAS,CAAC,UAAf,CAA0B,KAAK,CAAE,CAAE/E,OAAO,CAAE,MAAX,CAAjC,WACK4B,KAAK,eACF,KAAC,OAAD,EAAS,cAAc,CAAE6B,cAAzB,EAFR,cAII,KAAC,eAAD,EACI,cAAc,CAAED,cADpB,CAEI,SAAS,KAFb,CAEc,aAAa,CAAEG,aAF7B,EAJJ,CAQK/B,KAAK,eAAI,KAAC,IAAD,EAAM,YAAY,CAAE8B,YAApB,EARd,cAWI,aAAK,SAAS,CAAC,WAAf,wBACI,MAAC,MAAD,EACI,QAAQ,CAAE,CAAC1B,KAAD,EAAU,CAACQ,OAAX,EAAsBN,IAAI,CAAC8C,MAAL,GAAgB,CADpD,CAEI,SAAS,CAAC,aAFd,CAGI,OAAO,CAAC,SAHZ,CAII,OAAO,CAAEnB,QAJb,WAMK,GANL,QAOS,GAPT,GADJ,cAUI,KAAC,aAAD,EAAe,KAAK,CAAEjE,KAAtB,UACKkD,QAAQ,eAAI,KAAC,gBAAD,IADjB,EAVJ,GAXJ,GA7FR,EAdJ,GApCJ,GADJ,CA+KH","sourcesContent":["import React from \"react\";\nimport axios from \"axios\";\n\nimport UploadIMG from './uploadIMG/UploadIMG.png';\nimport Caption from \"../annotation/Caption\";\nimport Tags from \"../annotation/Tags\";\nimport FileInputSimple from \"./FileInputSimple\";\n\nimport { Typography, Chip, Avatar } from \"@material-ui/core\";\nimport Button from \"@material-ui/core/Button\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport MuiDialogTitle from \"@material-ui/core/DialogTitle\";\nimport MuiDialogContent from \"@material-ui/core/DialogContent\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport CloseIcon from \"@material-ui/icons/Close\";\nimport Popover from \"@material-ui/core/Popover\";\nimport { ThemeProvider } from \"@material-ui/styles\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\n\nimport { createTheme } from \"@material-ui/core/styles\";\nimport { makeStyles } from '@material-ui/core/styles';\nimport { withStyles } from \"@material-ui/core/styles\";\n\nimport MatchBar from \"../../explore/Matchbar\";\n\n//popover styling\nconst useStyles = makeStyles((theme) => ({\n    popover: {\n        pointerEvents: 'none',\n    },\n    paper: {\n        padding: theme.spacing(1),\n        backgroundColor: 'transparent',\n    },\n}));\n\n\n// dialog styling\nconst styles = (theme) => ({\n    root: {\n        margin: 0,\n        padding: theme.spacing(2),\n        color: \"#FFFFFF\",\n        backgroundColor: \"#E6DAC8\",\n    },\n    closeButton: {\n        position: \"absolute\",\n        right: theme.spacing(1),\n        top: theme.spacing(1),\n        color: theme.palette.grey[500],\n    },\n});\n\n// return form styling\nconst theme = createTheme({\n    palette: {\n        primary: {\n            main: \"#000000\",\n        },\n        // secondary: {\n        //     main: \"#668389\",\n        // },\n    },\n});\n\nconst DialogTitle = withStyles(styles)((props) => {\n    const { children, classes, onClose, ...other } = props;\n    return (\n        <MuiDialogTitle disableTypography className={classes.root} {...other}>\n            <Typography variant=\"h6\">{children}</Typography>\n            {onClose ? (\n                <IconButton\n                    aria-label=\"close\"\n                    className={classes.closeButton}\n                    onClick={onClose}\n                >\n                    <CloseIcon />\n                </IconButton>\n            ) : null}\n        </MuiDialogTitle>\n    );\n});\n\nconst DialogContent = withStyles((theme) => ({\n    root: {\n        padding: theme.spacing(2),\n        backgroundColor: \"#FFFFFF\",\n    },\n}))(MuiDialogContent);\n\n\nexport default function CustomizedDialogs(props) {\n    const classes = useStyles();\n    const [anchorEl, setAnchorEl] = React.useState(null);\n    const [open, setOpen] = React.useState(false);\n    const [forms, setForms] = React.useState(false);\n\n    const [post, setPost] = React.useState(false);\n    const [image, setImage] = React.useState(null);\n    const [tags, setTags] = React.useState([]);\n    const [src, setSrc] = React.useState(null);\n    const [returnTags, setReturnTags] = React.useState(null);\n    const [caption, setCaption] = React.useState(null);\n    const [returnCaption, setReturnCaption] = React.useState([]);\n    const [returnAITags, setReturnAITags] = React.useState([]);\n    const [progress, setProgress] = React.useState(false);\n\n    const handleClickOpen = () => {\n        setOpen(true);\n    };\n    const handleClose = () => {\n        setOpen(false);\n    };\n\n    const showPopover = (event) => {\n        setAnchorEl(event.currentTarget);\n    }\n\n    const closePopover = () => {\n        setAnchorEl(null);\n    };\n\n    const openPopover = Boolean(anchorEl);\n\n    const showInputForms = () => {\n        setForms(true);\n    }\n\n    const enteredCaption = (caption) => {\n        setCaption(caption);\n    };\n    const selectedTags = (tags) => {\n        setTags(tags);\n    };\n\n    const selectedImage = (img) => {\n        setImage(img);\n    };\n\n    async function postData() {\n        setProgress(true);\n        console.log(tags);\n        console.log(tags.join(\",\"));\n        let formData = new FormData();\n        formData.append(\"files\", image);\n        formData.append(\"tags\", tags.join(\",\"));\n        formData.append(\"caption\", caption);\n        let response = await axios.post(\"http://localhost:8000/images\", formData);\n        // props.newTitle();\n        setSrc(`http://localhost:8000/images/${response.data.id}.jpeg`);\n        console.log(response.data.caption);\n        setReturnCaption(response.data.caption);\n        console.log(response.data.tags);\n        setReturnTags(response.data.tags);\n        console.log(response.data.ai_tags);\n        setReturnAITags(response.data.ai_tags || []);\n        setPost(true);\n        setProgress(false);\n    }\n\n    return (\n        <div>\n            <IconButton\n                className=\"upload-button\"\n                onClick={handleClickOpen}\n                // onMouseEnter={showPopover}\n                // onMouseLeave={closePopover}\n                size=\"small\"\n            >\n                <div>\n                    <img src={UploadIMG} alt=\"upload\" width=\"90px\" />\n                </div>\n            </IconButton>\n            <Popover\n                id=\"mouse-over-popover\"\n                className={classes.popover}\n                classes={{\n                    paper: classes.paper,\n                }}\n                elevation={0}\n                open={openPopover}\n                anchorEl={anchorEl}\n                anchorOrigin={{\n                    vertical: 'top',\n                    horizontal: 'center',\n                }}\n                transformOrigin={{\n                    vertical: 'bottom',\n                    horizontal: 'center',\n                }}\n                onClose={closePopover}\n                disableRestoreFocus\n            >\n                <Typography variant='h6' style={{ color: \"#B272CE\" }}>\n                    Upload\n                </Typography>\n            </Popover>\n            <Dialog\n                onClose={handleClose}\n                aria-labelledby=\"customized-dialog-title\"\n                open={open}\n                maxWidth=\"md\"\n                fullWidth={true}\n            >\n                <DialogTitle\n                    //newTitle={newTitle}\n                    id=\"customized-dialog-title\"\n                    onClose={handleClose}\n                >\n                    Upload Image\n                </DialogTitle>\n                <DialogContent dividers>\n                    {post ?\n\n                        <div className=\"returnForm\" >\n                            <img\n                                style={{\n                                    display: \"block\",\n                                    margin: \"0 auto\",\n                                    height: \"50%\",\n                                    borderRadius: \"5px\",\n                                }}\n                                className=\"returned-image\"\n                                src={src}\n                                alt=\"\"\n                            />\n                            <br />\n                            <ThemeProvider theme={theme}>\n                                <Typography variant=\"h6\" color=\"primary\">\n                                    <div className=\"returned-caption\">\n                                        <i>\"</i>\n                                        <i>\n                                            {\" \"}\n                                            <span>{returnCaption}</span>{\" \"}\n                                        </i>\n                                        <i>\"</i>\n                                    </div>\n                                </Typography>\n                                <br />\n                                <span className=\"tags-return\">\n                                    <Typography color=\"primary\"> Your Tags: </Typography>\n                                    {returnTags.map((item) => (\n                                        <Chip\n                                            color=\"primary\"\n                                            className=\"returned-tags-chip\"\n                                            style={{ color: \"#B272CE\", backgroundColor: \"#FFFFFF\" }}\n                                            avatar={\n                                                <Avatar style={{ color: \"#B272CE\" }}>\n                                                    <div style={{ color: \"#FFFFFF\" }}>\n                                                        #\n                                                    </div>\n                                                </Avatar>\n                                            }\n                                            key={item.id}\n                                            label={item.tag}\n                                            variant=\"outlined\"\n                                        />\n                                    ))}\n                                </span>\n                                <br />\n                                <br />\n                                <span className=\"ai_tags_return\">\n                                    <Typography color=\"secondary\"> Tags from ImageNet AI: </Typography>\n                                    {returnAITags.length === 0 && (\n                                        <Typography variant=\"h12\" color=\"#OOOOOO\">\n                                            <i>[couldn't identify any tags] </i>\n                                        </Typography>\n                                    )}\n                                    <div>\n                                        {returnAITags.map((item) => (\n                                            <Chip\n                                                className=\"returned-ai-tags-chip\"\n                                                style={{ color: \"#000000\", backgroundColor: \"#FFFFFF\" }}\n                                                avatar={\n                                                    <Avatar style={{ background: \"#B5BCB4\" }}>\n                                                        <div style={{ color: \"#FFFFFF\" }}>\n                                                            #\n                                                        </div>\n                                                    </Avatar>\n                                                }\n                                                key={item.id}\n                                                label={item.tag}\n                                            />\n                                        ))}\n                                    </div>\n                                    <div>\n                                        {returnAITags.map((aiitem) => {\n                                            return (\n                                                <MatchBar\n                                                    match={parseFloat(aiitem.confidence)}\n                                                    aitag={aiitem.tag}\n                                                />\n                                            );\n                                        })}\n                                    </div>\n                                </span>\n\n                                <br />\n                                <br />\n                            </ThemeProvider>\n                        </div>\n\n                        :\n\n                        <div className=\"postForm\" style={{ padding: \"50px\" }}>\n                            {forms &&\n                                <Caption enteredCaption={enteredCaption} />}\n\n                            <FileInputSimple\n                                showInputForms={showInputForms}\n                                FileInput selectedImage={selectedImage}\n                            />\n                            {forms && <Tags selectedTags={selectedTags} />}\n\n\n                            <div className=\"save-data\">\n                                <Button\n                                    disabled={!image || !caption || tags.length === 0}\n                                    className=\"save-button\"\n                                    palette=\"primary\"\n                                    onClick={postData}\n                                >\n                                    {\" \"}\n                                    Save{\" \"}\n                                </Button>\n                                <ThemeProvider theme={theme}>\n                                    {progress && <CircularProgress />}\n                                </ThemeProvider>\n                            </div>\n                        </div>\n                    }\n                </DialogContent>\n            </Dialog>\n        </div>\n    );\n}\n"]},"metadata":{},"sourceType":"module"}
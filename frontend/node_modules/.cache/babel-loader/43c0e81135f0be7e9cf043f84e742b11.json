{"ast":null,"code":"var _jsxFileName = \"/Users/jielianglin/Desktop/m-v2-frontend/frontend/src/components/upload/annotation/WellBeingTool.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport axios from \"axios\";\nimport FileInputWellBeing from '../FileInputWellBeing';\nimport Tags from './Tags';\nimport Caption from './Caption';\nimport { Typography, Chip, Avatar } from \"@material-ui/core\";\nimport Button from \"@material-ui/core/Button\";\nimport { ThemeProvider } from \"@material-ui/styles\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport { createTheme } from \"@material-ui/core/styles\";\nimport MatchBar from \"../../explore/Matchbar\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst theme = createTheme({\n  palette: {\n    primary: {\n      main: \"#000000\"\n    } // secondary: {\n    //     main: \"#668389\",\n    // },\n\n  }\n});\nexport default function WellBeingTool(props) {\n  _s();\n\n  const [post, setPost] = React.useState(false);\n  const [image, setImage] = React.useState(null);\n  const [tags, setTags] = React.useState([]);\n  const [src, setSrc] = React.useState(null);\n  const [caption, setCaption] = React.useState(null);\n  const [returnCaption, setReturnCaption] = React.useState(null);\n  const [returnTags, setReturnTags] = React.useState([]);\n  const [returnAITags, setReturnAITags] = React.useState([]);\n  const [progress, setProgress] = React.useState(false);\n  const [forms, setForms] = React.useState(false);\n\n  const enteredCaption = caption => {\n    setCaption(caption);\n  };\n\n  const selectedTags = tags => {\n    setTags(tags);\n  };\n\n  const selectedImage = img => {\n    setImage(img);\n  };\n\n  const resetCanvas = () => {\n    setImage(!image);\n  };\n\n  const showInputForms = () => {\n    setForms(true);\n  };\n\n  async function postData() {\n    setProgress(true);\n    console.log(tags);\n    console.log(tags.join(\",\"));\n    let formData = new FormData();\n    formData.append(\"files\", image);\n    formData.append(\"tags\", tags.join(\",\"));\n    formData.append(\"caption\", caption);\n    let response = await axios.post(\"http://localhost:8000/images\", formData);\n    props.newTitle();\n    setSrc(`http://localhost:8000/images/${response.data.id}.jpeg`);\n    console.log(response.data.caption);\n    setReturnCaption(response.data.caption);\n    console.log(response.data.tags);\n    setReturnTags(response.data.tags);\n    console.log(response.data.ai_tags);\n    setReturnAITags(response.data.ai_tags || []);\n    setPost(true);\n    setProgress(false);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: post ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"returnForm\",\n      style: {\n        backgroundColor: \"#FFFFFF\",\n        borderRadius: \"3px\",\n        boxShadow: \"3px 3px 3px #b4beb7\",\n        padding: \"50px\",\n        maxWidth: \"800px\",\n        height: \"auto\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        style: {\n          display: \"block\",\n          margin: \"0 auto\",\n          height: \"50%\",\n          borderRadius: \"5px\"\n        },\n        className: \"returned-image\",\n        src: src,\n        alt: \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(ThemeProvider, {\n        theme: theme,\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h6\",\n          color: \"primary\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"returned-caption\",\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              children: \"\\\"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n              children: [\" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                children: returnCaption\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 107,\n                columnNumber: 37\n              }, this), \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n              children: \"\\\"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"tags-return\",\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            color: \"primary\",\n            children: \" Your Tags: \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 29\n          }, this), returnTags.map(item => /*#__PURE__*/_jsxDEV(Chip, {\n            className: \"chip1\",\n            style: {\n              color: \"#B272CE\",\n              backgroundColor: \"#FFFFFF\"\n            },\n            avatar: /*#__PURE__*/_jsxDEV(Avatar, {\n              style: {\n                color: \"#B272CE\"\n              },\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: \"#FFFFFF\"\n                },\n                children: \"#\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 121,\n                columnNumber: 45\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 41\n            }, this),\n            label: item.tag,\n            variant: \"outlined\"\n          }, item.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 33\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"ai_tags_return\",\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            color: \"secondary\",\n            children: \" Tags from ImageNet AI: \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 29\n          }, this), returnAITags.length === 0 && /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h12\",\n            color: \"#OOOOOO\",\n            children: /*#__PURE__*/_jsxDEV(\"i\", {\n              children: \"[couldn't identify any tags] \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 138,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 33\n          }, this), returnAITags.map(item => /*#__PURE__*/_jsxDEV(Chip, {\n            className: \"chip2\",\n            style: {\n              color: \"#000000\",\n              backgroundColor: \"#FFFFFF\"\n            },\n            avatar: /*#__PURE__*/_jsxDEV(Avatar, {\n              style: {\n                background: \"#B5BCB4\"\n              },\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: \"#FFFFFF\"\n                },\n                children: \"#\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 148,\n                columnNumber: 45\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 147,\n              columnNumber: 41\n            }, this),\n            label: item.tag\n          }, item.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 33\n          }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: returnAITags.map(aiitem => {\n              return /*#__PURE__*/_jsxDEV(MatchBar, {\n                match: parseFloat(aiitem.confidence),\n                aitag: aiitem.tag\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 160,\n                columnNumber: 41\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: resetCanvas,\n          children: \"Back to WellBeing upload\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: \"50px\",\n        backgroundColor: \"#FFFFFF\",\n        borderRadius: \"3px\",\n        boxShadow: \"3px 3px 3px #b4beb7\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 21\n      }, this), forms && /*#__PURE__*/_jsxDEV(Caption, {\n        enteredCaption: enteredCaption\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 31\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(FileInputWellBeing, {\n          selectedImage: selectedImage,\n          showInputForms: showInputForms\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 21\n      }, this), forms && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(Tags, {\n          selectedTags: selectedTags\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"save-data\",\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            disabled: !image || !caption || tags.length === 0,\n            className: \"save-button\",\n            palette: \"primary\",\n            onClick: postData,\n            children: [\" \", \"Save\", \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(ThemeProvider, {\n            theme: theme,\n            children: progress && /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 201,\n              columnNumber: 50\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 9\n  }, this);\n}\n\n_s(WellBeingTool, \"7f9+illSufvyjO2PwMtbhEJA2Uc=\");\n\n_c = WellBeingTool;\n\nvar _c;\n\n$RefreshReg$(_c, \"WellBeingTool\");","map":{"version":3,"sources":["/Users/jielianglin/Desktop/m-v2-frontend/frontend/src/components/upload/annotation/WellBeingTool.js"],"names":["React","axios","FileInputWellBeing","Tags","Caption","Typography","Chip","Avatar","Button","ThemeProvider","CircularProgress","createTheme","MatchBar","theme","palette","primary","main","WellBeingTool","props","post","setPost","useState","image","setImage","tags","setTags","src","setSrc","caption","setCaption","returnCaption","setReturnCaption","returnTags","setReturnTags","returnAITags","setReturnAITags","progress","setProgress","forms","setForms","enteredCaption","selectedTags","selectedImage","img","resetCanvas","showInputForms","postData","console","log","join","formData","FormData","append","response","newTitle","data","id","ai_tags","backgroundColor","borderRadius","boxShadow","padding","maxWidth","height","display","margin","map","item","color","tag","length","background","aiitem","parseFloat","confidence"],"mappings":"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","sourcesContent":["import React from 'react';\nimport axios from \"axios\";\n\nimport FileInputWellBeing from '../FileInputWellBeing';\nimport Tags from './Tags';\nimport Caption from './Caption';\n\nimport { Typography, Chip, Avatar } from \"@material-ui/core\";\nimport Button from \"@material-ui/core/Button\";\n\n\nimport { ThemeProvider } from \"@material-ui/styles\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\n\nimport { createTheme } from \"@material-ui/core/styles\";\n\nimport MatchBar from \"../../explore/Matchbar\";\n\nconst theme = createTheme({\n    palette: {\n        primary: {\n            main: \"#000000\",\n        },\n        // secondary: {\n        //     main: \"#668389\",\n        // },\n    },\n});\n\nexport default function WellBeingTool(props) {\n\n\n    const [post, setPost] = React.useState(false);\n    const [image, setImage] = React.useState(null);\n    const [tags, setTags] = React.useState([]);\n    const [src, setSrc] = React.useState(null);\n    const [caption, setCaption] = React.useState(null);\n    const [returnCaption, setReturnCaption] = React.useState(null);\n    const [returnTags, setReturnTags] = React.useState([]);\n    const [returnAITags, setReturnAITags] = React.useState([]);\n    const [progress, setProgress] = React.useState(false);\n    const [forms, setForms] = React.useState(false);\n\n    const enteredCaption = (caption) => {\n        setCaption(caption);\n    };\n    const selectedTags = (tags) => {\n        setTags(tags);\n    };\n\n    const selectedImage = (img) => {\n        setImage(img);\n    };\n\n    const resetCanvas = () => {\n        setImage(!image);\n    }\n\n    const showInputForms = () => {\n        setForms(true);\n    }\n\n    async function postData() {\n        setProgress(true);\n        console.log(tags);\n        console.log(tags.join(\",\"));\n        let formData = new FormData();\n        formData.append(\"files\", image);\n        formData.append(\"tags\", tags.join(\",\"));\n        formData.append(\"caption\", caption);\n        let response = await axios.post(\"http://localhost:8000/images\", formData);\n        props.newTitle();\n        setSrc(`http://localhost:8000/images/${response.data.id}.jpeg`);\n        console.log(response.data.caption);\n        setReturnCaption(response.data.caption);\n        console.log(response.data.tags);\n        setReturnTags(response.data.tags);\n        console.log(response.data.ai_tags);\n        setReturnAITags(response.data.ai_tags || []);\n        setPost(true);\n        setProgress(false);\n    }\n\n    return (\n        <div>\n            {post ?\n                <div className=\"returnForm\" style={{ backgroundColor: \"#FFFFFF\", borderRadius: \"3px\", boxShadow: \"3px 3px 3px #b4beb7\", padding: \"50px\", maxWidth: \"800px\", height: \"auto\" }}>\n                    < img\n                        style={{\n                            display: \"block\",\n                            margin: \"0 auto\",\n                            height: \"50%\",\n                            borderRadius: \"5px\",\n                        }\n                        }\n                        className=\"returned-image\"\n                        src={src}\n                        alt=\"\"\n                    />\n                    <br />\n                    <ThemeProvider theme={theme}>\n                        <Typography variant=\"h6\" color=\"primary\">\n                            <div className=\"returned-caption\">\n                                <i>\"</i>\n                                <i>\n                                    {\" \"}\n                                    <span>{returnCaption}</span>{\" \"}\n                                </i>\n                                <i>\"</i>\n                            </div>\n                        </Typography>\n                        <br />\n                        <span className=\"tags-return\">\n                            <Typography color=\"primary\"> Your Tags: </Typography>\n                            {returnTags.map((item) => (\n                                <Chip\n                                    className=\"chip1\" style={{ color: \"#B272CE\", backgroundColor: \"#FFFFFF\" }}\n\n                                    avatar={\n                                        <Avatar style={{ color: \"#B272CE\" }}>\n                                            <div style={{ color: \"#FFFFFF\" }}>\n                                                #\n                                            </div>\n                                        </Avatar>\n                                    }\n                                    key={item.id}\n                                    label={item.tag}\n                                    variant=\"outlined\"\n                                />\n                            ))}\n                        </span>\n                        <br />\n                        <br />\n                        <span className=\"ai_tags_return\">\n                            <Typography color=\"secondary\"> Tags from ImageNet AI: </Typography>\n                            {returnAITags.length === 0 && (\n                                <Typography variant=\"h12\" color=\"#OOOOOO\">\n                                    <i>[couldn't identify any tags] </i>\n                                </Typography>\n                            )}\n\n                            {returnAITags.map((item) => (\n                                <Chip\n                                    className=\"chip2\" style={{ color: \"#000000\", backgroundColor: \"#FFFFFF\" }}\n\n                                    avatar={\n                                        <Avatar style={{ background: \"#B5BCB4\" }}>\n                                            <div style={{ color: \"#FFFFFF\" }}>\n                                                #\n                                            </div>\n                                        </Avatar>\n                                    }\n                                    key={item.id}\n                                    label={item.tag}\n                                />\n                            ))}\n                            <div>\n                                {returnAITags.map((aiitem) => {\n                                    return (\n                                        <MatchBar\n                                            match={parseFloat(aiitem.confidence)}\n                                            aitag={aiitem.tag}\n                                        />\n                                    );\n                                })}\n                            </div>\n                        </span>\n                        <br />\n                        <Button onClick={resetCanvas}>Back to WellBeing upload</Button>\n                        <br />\n                    </ThemeProvider>\n                </div >\n\n                :\n\n                <div style={{ padding: \"50px\", backgroundColor: \"#FFFFFF\", borderRadius: \"3px\", boxShadow: \"3px 3px 3px #b4beb7\" }}>\n                    <br />\n                    <br />\n                    {forms && <Caption enteredCaption={enteredCaption} />}\n                    <br />\n                    <div >\n                        <FileInputWellBeing selectedImage={selectedImage} showInputForms={showInputForms} />\n                    </div>\n                    <br />\n                    {forms &&\n                        <div>\n                            <br />\n                            <Tags selectedTags={selectedTags} />\n                            <br />\n                            <div className=\"save-data\">\n                                <Button\n                                    disabled={!image || !caption || tags.length === 0}\n                                    className=\"save-button\"\n                                    palette=\"primary\"\n                                    onClick={postData}\n                                >\n                                    {\" \"}\n                                    Save{\" \"}\n                                </Button>\n                                <ThemeProvider theme={theme}>\n                                    {progress && <CircularProgress />}\n                                </ThemeProvider>\n                            </div>\n                        </div>}\n                </div >\n            }\n\n        </div>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _regeneratorRuntime from\"/Users/jielianglin/Desktop/m-v2-frontend/frontend/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/jielianglin/Desktop/m-v2-frontend/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/jielianglin/Desktop/m-v2-frontend/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectSpread from\"/Users/jielianglin/Desktop/m-v2-frontend/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _objectWithoutProperties from\"/Users/jielianglin/Desktop/m-v2-frontend/frontend/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";var _excluded=[\"children\",\"classes\",\"onClose\"];import React,{useState,useEffect}from'react';import SearchBar from\"material-ui-search-bar\";import{Typography,Chip,Avatar}from\"@material-ui/core\";import Carousel from'react-material-ui-carousel';import{makeStyles}from'@material-ui/core/styles';import Dialog from'@material-ui/core/Dialog';import MuiDialogTitle from\"@material-ui/core/DialogTitle\";import MuiDialogContent from\"@material-ui/core/DialogContent\";import ImageList from'@material-ui/core/ImageList';import ImageListItem from'@material-ui/core/ImageListItem';import IconButton from\"@material-ui/core/IconButton\";import CloseIcon from\"@material-ui/icons/Close\";import{withStyles}from\"@material-ui/core/styles\";import MatchBar from\"./Matchbar\";// import image1 from './Gallery/image1/image1.jpg';\n// import image2 from './Gallery/image2/image2.jpg';\n// import image3 from './Gallery/image3/image3.png';\n// const images = [\n//   { id: 1, src: `${image1}` },\n//   { id: 2, src: `${image2}` },\n//   { id: 3, src: `${image3}` },\n// ]\n// styling for dialog\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{paper:{backgroundColor:\"transparent\",boxShadow:theme.shadows[5],outline:\"none\",borderRadius:\"5px\"},modal:{display:\"flex\",padding:\"none\",alignItems:\"center\",justifyContent:\"center\"}};});var styles=function styles(theme){return{root:{margin:0,padding:theme.spacing(2),color:\"#2B4466\",backgroundColor:\"#E6DAC8\"},closeButton:{position:\"absolute\",right:theme.spacing(1),top:theme.spacing(1),color:theme.palette.grey[500]}};};var DialogTitle=withStyles(styles)(function(props){var children=props.children,classes=props.classes,onClose=props.onClose,other=_objectWithoutProperties(props,_excluded);return/*#__PURE__*/_jsxs(MuiDialogTitle,_objectSpread(_objectSpread({disableTypography:true,className:classes.root},other),{},{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:children}),onClose?/*#__PURE__*/_jsx(IconButton,{\"aria-label\":\"close\",className:classes.closeButton,onClick:onClose,children:/*#__PURE__*/_jsx(CloseIcon,{})}):null]}));});var DialogContent=withStyles(function(theme){return{root:{padding:theme.spacing(2),backgroundColor:\"#E6DAC8\"}};})(MuiDialogContent);export default function Search(){var classes=useStyles();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),search=_useState2[0],setSearch=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),query=_useState4[0],setQuery=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),results=_useState6[0],setResults=_useState6[1];var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),open=_React$useState2[0],setOpen=_React$useState2[1];var _React$useState3=React.useState(true),_React$useState4=_slicedToArray(_React$useState3,2),gallery=_React$useState4[0],setGallery=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),carousel=_React$useState6[0],setCarousel=_React$useState6[1];var handleOpen=function handleOpen(){setOpen(true);};var handleClose=function handleClose(){setOpen(false);};function onSubmit(e){e.preventDefault();setQuery(search);console.log(search);}var onSearch=function onSearch(e){setSearch(e.target.value);};useEffect(function(){function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,json;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"http://127.0.0.1:8000/images?tag=\".concat(query));case 3:response=_context.sent;_context.next=6;return response.json();case 6:json=_context.sent;console.log({json:json});setResults(json);handleOpen();_context.next=14;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](0);case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,12]]);}));return _fetchData.apply(this,arguments);}if(query!==\"\"){console.log(\"the data does not exist\");fetchData();}},[query]);var showCarousel=function showCarousel(){setGallery(false);setCarousel(true);};var showGallery=function showGallery(){setCarousel(false);setGallery(true);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"searchBar\",style:{padding:\"15px 20px 0px 0px\"},children:/*#__PURE__*/_jsx(SearchBar,{placeholder:\"Search a tag\",value:search,onChange:onSearch,onRequestSearch:onSubmit,cancelOnEscape:\"true\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"eChartsGallery\",children:/*#__PURE__*/_jsxs(Dialog,{onClose:handleClose,\"aria-labelledby\":\"simple-dialog-title\",open:open,maxWidth:\"md\",fullWidth:true,children:[/*#__PURE__*/_jsx(DialogTitle//newTitle={newTitle}\n,{id:\"customized-dialog-title\",onClose:handleClose,children:/*#__PURE__*/_jsxs(Typography,{variant:\"h5\",children:[\"Images for `$\",search,\"`\"]})}),/*#__PURE__*/_jsxs(DialogContent,{dividers:true,children:[gallery&&/*#__PURE__*/_jsx(\"div\",{className:\"gallery\",children:/*#__PURE__*/_jsx(\"div\",{className:classes.root,children:/*#__PURE__*/_jsx(ImageList,{rowHeight:160,className:classes.imageList,cols:3,children:results.map(function(image){return/*#__PURE__*/_jsx(ImageListItem,{cols:image.cols||1,children:/*#__PURE__*/_jsx(\"img\",{src:image.id,alt:\"\",maxHeight:\"100px\",onClick:showCarousel})},image.id);})})})}),carousel&&/*#__PURE__*/_jsx(Carousel,{children:results.map(function(item){return/*#__PURE__*/_jsxs(\"div\",{className:\"carouselResults\",children:[/*#__PURE__*/_jsxs(Typography,{className:\"mtag-label\",children:[\" \",item.caption]}),/*#__PURE__*/_jsx(\"div\",{cols:item.cols||1,style:{display:\"flex\",justifyContent:\"center\"},children:/*#__PURE__*/_jsx(\"img\",{id:item.id,src:item.src,alt:\"\",maxHeight:\"100px\",onClick:showGallery})},item.id),/*#__PURE__*/_jsxs(\"div\",{className:\"metadata\",children:[/*#__PURE__*/_jsx(\"div\",{style:{display:\"block\",textAlign:\"center\"},children:/*#__PURE__*/_jsx(Typography,{className:\"mtag-label\",children:\" Our Tags:\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"userTags\",style:{display:\"flex\",justifyContent:\"center\",padding:\"10px\"},children:item.tags.map(function(posttag){return/*#__PURE__*/_jsx(Chip,{className:\"chip1\",style:{color:\"#B272CE\",backgroundColor:\"#FFFFFF\"},avatar:/*#__PURE__*/_jsx(Avatar,{style:{color:\"#B272CE\"},children:/*#__PURE__*/_jsx(\"div\",{style:{color:\"#FFFFFF\"},children:\"#\"})}),label:posttag.tag,component:\"a\",href:\"#chip\",variant:\"outlined\",color:\"primary\",clickable:true},posttag.id);})}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"block\",textAlign:\"center\"},children:/*#__PURE__*/_jsx(Typography,{className:\"ai_tags\",children:\" Tags from ImageNet AI:\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"AITAgs\",style:{display:\"flex\",justifyContent:\"center\",padding:\"10px\"},children:item.ai_tags.map(function(aitag){return/*#__PURE__*/_jsx(Chip,{className:\"chip2\",style:{color:\"#000000\",backgroundColor:\"#FFFFFF\"},avatar:/*#__PURE__*/_jsx(Avatar,{style:{background:\"#B5BCB4\"},children:/*#__PURE__*/_jsx(\"div\",{style:{color:\"#FFFFFF\"},children:\"#\"})}),label:aitag.tag,component:\"a\",href:\"#chip\",clickable:true},aitag.id);})}),/*#__PURE__*/_jsx(\"div\",{children:item.ai_tags.map(function(aiitem){return/*#__PURE__*/_jsx(MatchBar,{match:parseFloat(aiitem.confidence),aitag:aiitem.tag});})})]})]});})})]})]})})]});}","map":{"version":3,"sources":["/Users/jielianglin/Desktop/m-v2-frontend/frontend/src/components/explore/Searchbar.js"],"names":["React","useState","useEffect","SearchBar","Typography","Chip","Avatar","Carousel","makeStyles","Dialog","MuiDialogTitle","MuiDialogContent","ImageList","ImageListItem","IconButton","CloseIcon","withStyles","MatchBar","useStyles","theme","paper","backgroundColor","boxShadow","shadows","outline","borderRadius","modal","display","padding","alignItems","justifyContent","styles","root","margin","spacing","color","closeButton","position","right","top","palette","grey","DialogTitle","props","children","classes","onClose","other","DialogContent","Search","search","setSearch","query","setQuery","results","setResults","open","setOpen","gallery","setGallery","carousel","setCarousel","handleOpen","handleClose","onSubmit","e","preventDefault","console","log","onSearch","target","value","fetchData","fetch","response","json","showCarousel","showGallery","imageList","map","image","cols","id","item","caption","src","textAlign","tags","posttag","tag","ai_tags","aitag","background","aiitem","parseFloat","confidence"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport SearchBar from \"material-ui-search-bar\";\nimport { Typography, Chip, Avatar } from \"@material-ui/core\";\nimport Carousel from 'react-material-ui-carousel'\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport Dialog from '@material-ui/core/Dialog';\nimport MuiDialogTitle from \"@material-ui/core/DialogTitle\";\nimport MuiDialogContent from \"@material-ui/core/DialogContent\";\nimport ImageList from '@material-ui/core/ImageList';\nimport ImageListItem from '@material-ui/core/ImageListItem';\nimport IconButton from \"@material-ui/core/IconButton\";\nimport CloseIcon from \"@material-ui/icons/Close\";\n\nimport { withStyles } from \"@material-ui/core/styles\";\n\nimport MatchBar from \"./Matchbar\";\n\n// import image1 from './Gallery/image1/image1.jpg';\n// import image2 from './Gallery/image2/image2.jpg';\n// import image3 from './Gallery/image3/image3.png';\n\n// const images = [\n//   { id: 1, src: `${image1}` },\n//   { id: 2, src: `${image2}` },\n//   { id: 3, src: `${image3}` },\n// ]\n\n// styling for dialog\n\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n    backgroundColor: \"transparent\",\n    boxShadow: theme.shadows[5],\n    outline: \"none\",\n    borderRadius: \"5px\",\n  },\n  modal: {\n    display: \"flex\",\n    padding: \"none\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n}));\n\nconst styles = (theme) => ({\n  root: {\n    margin: 0,\n    padding: theme.spacing(2),\n    color: \"#2B4466\",\n    backgroundColor: \"#E6DAC8\",\n  },\n  closeButton: {\n    position: \"absolute\",\n    right: theme.spacing(1),\n    top: theme.spacing(1),\n    color: theme.palette.grey[500],\n\n  },\n});\n\nconst DialogTitle = withStyles(styles)((props) => {\n  const { children, classes, onClose, ...other } = props;\n  return (\n    <MuiDialogTitle disableTypography className={classes.root} {...other}>\n      <Typography variant=\"h6\">{children}</Typography>\n      {onClose ? (\n        <IconButton\n          aria-label=\"close\"\n          className={classes.closeButton}\n          onClick={onClose}\n        >\n          <CloseIcon />\n        </IconButton>\n      ) : null}\n    </MuiDialogTitle>\n  );\n});\n\nconst DialogContent = withStyles((theme) => ({\n  root: {\n    padding: theme.spacing(2),\n    backgroundColor: \"#E6DAC8\"\n  },\n}))(MuiDialogContent);\n\nexport default function Search() {\n  const classes = useStyles();\n  const [search, setSearch] = useState(\"\");\n  const [query, setQuery] = useState(\"\");\n  const [results, setResults] = useState([]);\n  const [open, setOpen] = React.useState(false);\n  const [gallery, setGallery] = React.useState(true);\n  const [carousel, setCarousel] = React.useState(false);\n\n  const handleOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  function onSubmit(e) {\n    e.preventDefault();\n    setQuery(search);\n    console.log(search);\n  }\n\n  const onSearch = (e) => {\n    setSearch(e.target.value);\n  }\n\n  useEffect(() => {\n    async function fetchData() {\n      try {\n        const response = await fetch(\n          `http://127.0.0.1:8000/images?tag=${query}`\n        );\n        const json = await response.json();\n        console.log({ json });\n        setResults(json);\n        handleOpen();\n      } catch (error) { }\n    }\n\n    if (query !== \"\") {\n      console.log(\"the data does not exist\");\n      fetchData();\n    }\n  }, [query]);\n\n  const showCarousel = () => {\n    setGallery(false);\n    setCarousel(true);\n  }\n\n  const showGallery = () => {\n    setCarousel(false);\n    setGallery(true);\n  }\n\n  return (\n    <div>\n      <div className=\"searchBar\" style={{ padding: \"15px 20px 0px 0px\" }}>\n        <SearchBar\n          placeholder='Search a tag'\n          value={search}\n          onChange={onSearch}\n          onRequestSearch={onSubmit}\n          cancelOnEscape=\"true\"\n        />\n      </div>\n      <div className=\"eChartsGallery\">\n        <Dialog\n          onClose={handleClose}\n          aria-labelledby=\"simple-dialog-title\"\n          open={open}\n          maxWidth=\"md\"\n          fullWidth={true}\n        >\n          <DialogTitle\n            //newTitle={newTitle}\n            id=\"customized-dialog-title\"\n            onClose={handleClose}\n          >\n            <Typography variant=\"h5\">Images for `${search}`</Typography>\n          </DialogTitle>\n          <DialogContent dividers>\n            {gallery && (\n              <div className=\"gallery\">\n                <div className={classes.root}>\n                  <ImageList rowHeight={160} className={classes.imageList} cols={3}>\n                    {results.map((image) => (\n                      <ImageListItem key={image.id} cols={image.cols || 1} >\n                        <img src={image.id} alt=\"\" maxHeight=\"100px\" onClick={showCarousel}\n                        />\n                      </ImageListItem>\n                    ))}\n                  </ImageList>\n                </div>\n              </div>\n            )}\n            {carousel && (\n              <Carousel>\n                {results.map((item) => (\n                  <div className=\"carouselResults\">\n                    <Typography className=\"mtag-label\"> {item.caption}\n                    </Typography>\n                    <div key={item.id} cols={item.cols || 1} style={{ display: \"flex\", justifyContent: \"center\" }}>\n                      <img id={item.id} src={item.src} alt=\"\" maxHeight=\"100px\" onClick={showGallery}\n                      />\n                    </div>\n\n                    <div className=\"metadata\" >\n                      <div style={{ display: \"block\", textAlign: \"center\" }}>\n                        <Typography className=\"mtag-label\"> Our Tags:\n                        </Typography>\n                      </div>\n                      <div className=\"userTags\" style={{ display: \"flex\", justifyContent: \"center\", padding: \"10px\" }}>\n\n\n                        {item.tags.map((posttag) => {\n\n                          return (\n                            <Chip className=\"chip1\" style={{ color: \"#B272CE\", backgroundColor: \"#FFFFFF\" }} avatar={\n                              <Avatar style={{ color: \"#B272CE\" }}>\n                                <div style={{ color: \"#FFFFFF\" }}>\n                                  #\n                                </div>\n                              </Avatar>\n                            }\n                              key={posttag.id}\n                              label={posttag.tag}\n                              component=\"a\"\n                              href=\"#chip\"\n                              variant=\"outlined\"\n                              color=\"primary\"\n                              clickable\n                            />\n                          );\n                        })}\n                      </div>\n\n                      <div style={{ display: \"block\", textAlign: \"center\" }}>\n                        <Typography className=\"ai_tags\"> Tags from ImageNet AI:\n                        </Typography>\n                      </div>\n                      <div className=\"AITAgs\" style={{ display: \"flex\", justifyContent: \"center\", padding: \"10px\" }}>\n                        {item.ai_tags.map((aitag) => {\n\n                          return (\n                            <Chip className=\"chip2\" style={{ color: \"#000000\", backgroundColor: \"#FFFFFF\" }} avatar={\n                              <Avatar style={{ background: \"#B5BCB4\" }}>\n                                <div style={{ color: \"#FFFFFF\" }}>\n                                  #\n                                </div>\n                              </Avatar>\n                            }\n                              key={aitag.id}\n                              label={aitag.tag}\n                              component=\"a\"\n                              href=\"#chip\"\n                              clickable\n                            />\n                          );\n                        })}\n                      </div>\n                      <div>\n                        {item.ai_tags.map((aiitem) => {\n                          return (\n                            <MatchBar\n                              match={parseFloat(aiitem.confidence)}\n                              aitag={aiitem.tag}\n                            />\n                          );\n                        })}\n                      </div>\n                    </div>\n                  </div>))}\n              </Carousel>\n            )\n            }\n          </DialogContent>\n        </Dialog>\n      </div>\n    </div>\n  );\n}"]},"metadata":{},"sourceType":"module"}